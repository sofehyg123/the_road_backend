## 학습계기  
* 스프링 부트와 AWS로 혼자 구현하는 웹 서비스를 따라치다가 멘붕옴.  
  - 로직에 대한 이해가 가지 않음.  
  - 스프링에 대한 이해가 풍부하고 스프링으로 저자가 진행하는 프로젝트를 진행한 경험이 있다면, 재미로 볼 수 있으나, 나는 모두 없었다.  
    - 학습대상에 포함되지 않음.  
  - 모르는 것들이 너무 많아서, 배보다 배꼽이 더크게 되는 상황이 발생  
    - 모르면 찾아보고 -> 개념에 대한 이해와 예제를 보고 -> 다시 책으로 돌아와서 이해한 것을 덮어씌어본다.  
    - 모르는 것을 찾아본다고 해도, 필요한 부분의 개념들에는 항상 앞 뒤로 연결되어 있는 경우가 많아서 이로인해, 소모되는 시간이 많았다.  
      - A에 대한 개념을 검색하면, A에 대한 개념에 오기까지의 기반지식들을 위에서부터 차례대로 설명하는 경우가 많다.  
* 해당강의의 학습대상에 내가 포함되어 있었다. 그래서 시작  
  
## 프로젝트 설정  
  
* 프로젝트 생성  
  - [start.spring.io](https://start.spring.io/)  
  - maven보다 gradle 쓰는 추세, snapshot: 만드는중.  
  - GroupId는 기업의 도메인명  
  - dependencies 중, spring web, Thymeleaf(템플릿엔진)을 가지고 수업진행  
    - 템플릿 엔진은 기호에 따라..  
  - resources: 자바 코드외의 설정파일들.(ex. XML이나 프로퍼티스 등)   
  - gradle은 나중에 공부해도 되고, 일단은 라이브러리를 가져오거나 버전 설정할 때 쓰는 것으로 알아두기  
    - 여유되면 책 구입후 공부.  
  - 요즘에는 테스트라이브러리를 기본적으로 스프링 부트에서 제공해준다.  
  - build.gradle : repositories 의 mavenCentral : **mavenCentral** 이라는 공개적인 사이트에서 라이브러리를 다운 받을 수 있도록 설정한다.  
    - 원하는 사이트의 경로를 적어줘도 된다.   
   ``` 
   @SpringBootApplication
   public static void main(String[] args) {
      SpringApplication.run(HelloSpringApplication.class, args);
   }
   /*
    * run 메소드 안에 자기 클래스를 넣으면서 @SpringBootApplication 애노테이션을 쓰게되는데,
    * 이 애노테이션은 내장된 톰캣을 띄우면서 스프링부트를 같이 실행하는 기능들이 들어있다.  
    */
  ``` 
    - intellij 쓰면 빌드가 자바를 직접 실행하는 것이 아니라 gradle을 실행하는 경우가 있다. 속도의 향상을 위해 재설정을 한다.  
      - preference > gradle 들어가서 Build and run using 과 run tests using 모두 intellij로 바꿔준다.  
      
* 라이브러리 확인  
  - 하나의 의존성을 주입으 받으 때 그 의존성과 의존된 다른 라이브러리도 같이 따라오게 된다.  
  - Dependencies : 라이브러리 간의 의존관계들을 확인 할 수 있다.  
  - 소스 라이브러리에는 왼만하면 웹서버가 내장되어 있음. (스프링부트는 내장 톰캣)  
  - 실무에서는 로깅을 통해 심각한 에러들을 따로 모아둔다 -> 로그파일이 관리 됨. (System.out.print 는 안씀).  
  - 정리  
    **스프링 부트 라이브러리**  
    + spring-boot-starter-web
      - spring-boot-starter-tomcat
      - spring-webmvc: 스프링 웹 MVC
    + spring-boot-starter-thymeleaf: 타임리프 템플릿 엔진(View)  
    + spring-boot-starter(공통): 스프링 부트 + 스프링 코어 + 로깅  
      - spring-boot  
        - spring-core
      - spring-boot-starter-logging  
        - logback,slf4j  
        
    **테스트 라이브러리**  
    + spring-boot-starter-test  
      - JUnit: 테스트 프레임워크  
      - mockito: 목 라이브러리  
      - assertj: 테스트 코드를 좀 더 편학 작성하게 도와주는 라이브러리  
      - spring-test: 스프링 통합 테스트 지원  
  
** View 환경설정  
  - 스프링 레퍼런스 참고하는 습관  
  - model (스프링 MVC에서의 M)  
  ```
     @GetMapping("hello")
     public String hell(Model model){
        model.addAttribute("data","hello!!");
        return "hello";
    }
  ```  
  - return 값을 hello라고 지정했을때, hello랑 동일한 이름을 가진 template/hello.html을 찾아줌. 여기에 모델값도 넘김.  
    [Template Engines](https://docs.spring.io/spring-boot/docs/2.3.1.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-mvc-template-engines) 
    [Template Engines2](https://www.baeldung.com/spring-template-engines)  
    템플릿 엔진에 대해서 검색  
  - spring-boot-devtools : 라이브러리를 추가하면, html 파일을 컴파일만 해주면 서버 재시작 없이 View 파일 변경이 가능하다.  
  - 인텔리J 컴파일 방법: 메뉴 build -> recompile  
  
* 빌드하고 실행하기  
  1. ./gradlew build -> 빌드  
  2. cd build/libs -> 여기서 빌드된 jar파일 확인  
  3. cjava -jar hello-spring-0.0.1-SNAPSHOT.jar : jar 파일 실행  
  
  - ./gradlew clean ->잘 안되었을 때 시도(빌드 폴더 삭제됨). ls해서 정말 삭제되었는지 확인하기.  

## 스프링 웹 개발 기초  
  
  JSP,ASP도 템플릿 엔진에 해당됨.  
  
* 정적 컨텐츠  
  - 파일 그대로 고객(웹 브라우저)에게 전달해주는 것  
  - 스프링 부트에서 제공해주는 정적 컨텐츠 관련 기능 레퍼런스로 확인해보기  
  - 여기서 프로그래밍 할 수 없고 정적 페이지만..    
  - 흐름 순서  
    - 요청을 보냄 -> 톰캣이 요청을 받아 스프링 컨테이너로 넘김 -> 스프링 컨테이너에서 컨트롤러가 우선순위를 갖으며 요청과 관련된 맵핑이 있는지 찾아봄-> 없으면 static 폴더에 요청과 관련된 페이지가 있는지 확인 및 반환
    
* MVC와 템플릿 엔진  
  - HTML을 서버에서 변형해서 전달하는 방식.  
  - Model, View, Controller  
  - @RequestParam(value="name", required=false)
  - 흐름 순서
    - 요청->톰캣->스프링컨테이너  
                  -> 맵핑된 메서드 return(+model 포함) -> viewResolver(뷰 찾고 템플릿엔진 연결해주는 역할) 동작  
                                                                                -> 찾아준 문서를 템플린 엔진이 렌더링해서 HTML로 변환후 브라우저에게 전달  
  
  
  
* API  
  - 예를들면, JSON 데이터 구조 포맷으로 클라이언트에게 전달함.  -> API 방식  
  - @ResponseBody : HTTP에서 몸체(Body)에 데이터를 직접 넣어주겠다는 의미임.  
  - MVC와 다른 점은 뷰에서 내려주는게 아니라, 문자열 자체가 그냥 내려감.  
  - 즉, 템플릿엔진은 화면을 가지고 view 템플릿이 있는 상태에서 조작하는 방식이고, api는 그냥 return 문자열을 그대로 전달해줌.  
  - api는 이런 용도로 씀.  
    - JSON 방식으로 key,value 전달이 되어서 심플한 방식으로 보여줄 수 있음.(관리도 쉬워질려나)  
  - 스프링에서는 객체를 return 하면 JSON 방식으로 반환해줌.  
  - getter/setter => 자바빈 규약  => 프로퍼티 접근 방식  
  
  
